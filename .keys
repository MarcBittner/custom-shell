
keysDebug=0

eval $(ssh-agent) > /dev/null
eval "$(goenv init -)"

#vc --mount /Volumes/kali/etc/failsafe/vault  --non-interactive -p

keySourceLocation="${keySourceLocation:-/Volumes/vault/keys/}"
keyTargetLocation="${keyTargetLocation:-"${HOME}/.ssh/"}"
keyTargetLocation="$(addTrailingSlash "${keyTargetLocation}")"
keySourceLocation="$(addTrailingSlash "${keySourceLocation}")"
purgeSymlinksFrom --directory  "$(expandPath ${keyTargetLocation})" --source "$(expandPath ${keySourceLocation})"
directoryExists "$(expandPath ${keySourceLocation})" && symlinkAllFiles --directory "$(expandPath ${keyTargetLocation})" --source "$(expandPath ${keySourceLocation})"

[[ keysDebug -gt 0 ]] && echo -e "keySourceLocation: ${keySourceLocation}\nkeyTargetLocation: ${keyTargetLocation}"

# ssh-add -q ~/.ssh/* &> /dev/null

keys=( marc_bittner_opswork MarcBittnerRing-GitHub id_ed25519_disqo_05312019 MarcBittnerPersonal.ed25519.05312019 )

for key in "${keys[@]}"
  do
    [[ keysDebug -gt 0 ]] && ssh-add ~/.ssh/${key} || ssh-add -q ~/.ssh/${key} &> /dev/null
done

[[ keysDebug -gt 0 ]]  &&  ssh-add -l

cd ~
#start_jenkins
